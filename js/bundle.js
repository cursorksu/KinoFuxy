"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function preventScrolling(e){$(e).off("mousewheel DOMMouseScroll touchstart touchmove").on("mousewheel DOMMouseScroll touchstart touchmove",function(e){var t=null;"mousewheel"==e.type?t=-1*e.originalEvent.wheelDelta:"DOMMouseScroll"==e.type&&(t=40*e.originalEvent.detail),t&&(e.stopPropagation(),e.preventDefault(),$(this).scrollTop(t+$(this).scrollTop()))})}function preventDefault(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.returnValue=!1}function preventDefaultForScrollKeys(e){if(keys[e.keyCode])return preventDefault(e),!1}function disableScroll(){window.addEventListener&&window.addEventListener("DOMMouseScroll touchstart touchmove",preventDefault,!1),window.onwheel=preventDefault,window.onmousewheel=document.onmousewheel=preventDefault,window.ontouchmove=preventDefault,document.onkeydown=preventDefaultForScrollKeys,$("body").addClass("overflow").css("padding-right",getScrollbarWidth()),$("header").css("right",getScrollbarWidth())}function enableScroll(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll touchstart touchmove",preventDefault,!1),window.onmousewheel=document.onmousewheel=null,window.onwheel=null,window.ontouchmove=null,document.onkeydown=null,$("body").removeClass("overflow").css("padding-right",0),$("header").css("right",0)}function getScrollbarWidth(){var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var o=document.createElement("div");o.style.width="100%",e.appendChild(o);var n=o.offsetWidth;return e.parentNode.removeChild(e),t-n}function deviceType(){return window.getComputedStyle(document.querySelector("body"),"::before").getPropertyValue("content").replace(/'/g,"").replace(/"/g,"")}function checkDeviceType(e,t,o,n,l){"desktop"===e&&n?l[0]():"tablet"===e&&o?l[1]():"mobile"===e&&t&&l[2]()}function staticInit(e,t,o,n){"desktop"===e?t():"tablet"===e?o():"mobile"===e&&n()}var _createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),RecommendationsSlider={slider:$(".recommendations-slider"),init:function(){!this.slider.hasClass("slick-initialized")&&this.slider.slick({slide:".item",slidesToShow:1,slidesToScroll:1,speed:500,fade:!0,arrows:!0,autoplay:!1,dots:!1,adaptiveHeight:!0,prevArrow:'<button type="button" class="slick-prev"><span class="box"><span class="help"><span class="icon-arrow-left"></span></span></span></button>',nextArrow:'<button type="button" class="slick-next"><span class="box"><span class="help"><span class="icon-arrow-right"></span></span></span></button>',responsive:[{breakpoint:1024,settings:{}}]})},destroy:function(){this.slider.hasClass("slick-initialized")&&this.slider.slick("unslick")}},toggleLinkText=function(e,t,o){e?"function"==typeof t&&t&&t():"function"==typeof o&&o&&o()},$=jQuery.noConflict(),keys={37:1,38:1,39:1,40:1},throttle=function(e,t,o){var n=!1,l=o||window,s=function(){n||(n=!0,requestAnimationFrame(function(){l.dispatchEvent(new CustomEvent(t)),n=!1}))};l.addEventListener(e,s)};!function(){function e(e){"desktop"===e&&p?(p=!1,h=!0,u=!1):"tablet"===e&&h?(u=!0,p=!0,h=!1):"mobile"===e&&u&&(u=!1,h=!0,p=!1)}var t=$(window),o=$(document),n=($("body"),$("html"),$("#show-mobile-menu")),l=$("#mobile-nav"),s=($("#mobile-user-nav"),$(".login-wget.logined > .info"),$("#ajax-s-container")),a=64,i=!(!navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/(Windows\sPhone)/i)),r=function(){function e(){var t=this;_classCallCheck(this,e),this.initSlickSliders=function(){t._sliderFrontSlider.slick({slide:".item",slidesToShow:1,slidesToScroll:1,arrows:!0,autoplay:!1,autoplaySpeed:4e3,dots:!0,variableWidth:!1,adaptiveHeight:!0,infinite:!0,speed:500,fade:!0,cssEase:"linear",prevArrow:'<button type="button" class="slick-prev"><span class="icon-arrow-left"></span></button>',nextArrow:'<button type="button" class="slick-next"><span class="icon-arrow-right"></span></button>',responsive:[{breakpoint:767,settings:{slidesToScroll:1,arrows:!1}}]});var e=t._movieGallerySlider.lightSlider({gallery:!0,item:4,speed:120,easing:"linear",loop:!0,slideMove:1,vertical:!0,controls:!1,enableDrag:!1,pager:!1,verticalHeight:720,galleryMargin:12,prevHtml:'<span class="box"><span class="help"><span class="icon-arrow-up"></span></span></span>',nextHtml:'<span class="box"><span class="help"><span class="icon-arrow-down"></span></span></span>',responsive:[{breakpoint:1025,settings:{item:6,vertical:!1,slideMove:1,galleryMargin:12}},{breakpoint:480,settings:{item:2,slideMove:1}}],onSliderLoad:function(e){e.lightGallery({selector:".movie-gallery-slider .lslide",addClass:"custom-lg movie-gallery",download:!1,showThumbByDefault:!1,share:!1,controls:!0,prevHtml:'<button class="lg-prev"><span class="box"><span class="help"><span class="icon-arrow-left"></span></span></span></button>',nextHtml:'<button class="lg-next"><span class="box"><span class="help"><span class="icon-arrow-right"></span></span></span></button>'})}});$(".galleryControls .slidePrev").click(function(t){t.preventDefault(),e.goToPrevSlide()}),$(".galleryControls .slideNext").click(function(t){t.preventDefault(),e.goToNextSlide()}),t._moviePostersSlider.slick({slide:".item",slidesToShow:1,slidesToScroll:1,arrows:!1,autoplay:!1,autoplaySpeed:4e3,dots:!0,variableWidth:!1,adaptiveHeight:!0,infinite:!0,speed:500,fade:!0,cssEase:"linear",prevArrow:'<button type="button" class="slick-prev"><span class="icon-arrow-left"></span></button>',nextArrow:'<button type="button" class="slick-next"><span class="icon-arrow-right"></span></button>',responsive:[{breakpoint:767,settings:{slidesToScroll:1,arrows:!1}}]})},this.init=function(){i&&$("html").addClass("android"),t.searchField(),t.customScroll(),t.selectCustomeScroll(),t.scrollToTop(),t.scrollToId(),t.initMmenu(),t.movieRating(),t.collectionRating(),$(window).scroll(function(){$(this).scrollTop()>2?($("header").addClass("scrolled"),$(".page-movie-links").addClass("scrolled"),$(".js-nav").length>0&&$(window).width()<1280&&$(".js-nav").addClass("scrolled")):($("header").removeClass("scrolled"),$(".page-movie-links").removeClass("scrolled"),$(".js-nav").length>0&&$(window).width()<1280&&$(".js-nav").removeClass("scrolled"))}),$(".item-gallery").lightGallery({addClass:"custom-lg",download:!1,showThumbByDefault:!1,share:!1,controls:!0,prevHtml:'<button class="lg-prev"><span class="box"><span class="help"><span class="icon-arrow-left"></span></span></span></button>',nextHtml:'<button class="lg-next"><span class="box"><span class="help"><span class="icon-arrow-right"></span></span></span></button>'}),$("#movieGallery, #posterGallery").lightGallery({addClass:"custom-lg movie-gallery",download:!1,showThumbByDefault:!1,share:!1,controls:!0,prevHtml:'<button class="lg-prev"><span class="box"><span class="help"><span class="icon-arrow-left"></span></span></span></button>',nextHtml:'<button class="lg-next"><span class="box"><span class="help"><span class="icon-arrow-right"></span></span></span></button>'}),t.openLightGallery(".btn-tralier"),t.openLightGallery("#open-movie-gallery"),t.openLightGallery(".field-btn-trailer > a"),t.initSlickSliders(),$(document).ready(function(e){setTimeout(function(){e(".page-movie .field-player").addClass("hide-quality")},15e3)}),$(".collapse").filter(function(e,t){return $(t).css("min-height")}).each(function(e,t){var o=$(t),n=o.css("min-height");o.on("hidden.bs.collapse",function(){o.removeClass("collapse").css({overflow:"hidden",height:n})}),o.hasClass("collapsed")&&o.collapse()}),$(".collapse-movie-description-btn").on("click",t.handleClickOnLinkText),$(".collapse-movie-info-btn").on("click",t.handleClickOnLinkText),$(".field-mobile-collapse-recommendations > a").on("click",function(e){$(this).parent().hide(),$(this).parent().next(".btn-load-more").show()}),$(".quality-filter a").click(function(e){$(".quality-filter li").removeClass("active"),$(this).parent().addClass("active")})},this.handleLoad=function(){},this.switchToMobile=function(){console.log("switchToMobile: Mobile"),o.foundation({"magellan-expedition":{active_class:"active",threshold:-60,destination_threshold:60,throttle_delay:50,fixed_top:60,offset_by_height:!1}}),RecommendationsSlider.destroy()},this.switchToTablet=function(){console.log("switchToTablet: Tablet"),o.foundation({"magellan-expedition":{active_class:"active",threshold:-70,destination_threshold:70,throttle_delay:50,fixed_top:70,offset_by_height:!1}}),RecommendationsSlider.init()},this.switchToDesktop=function(){console.log("switchToDesktop: Desktop"),$(document).foundation(),o.foundation({"magellan-expedition":{active_class:"active",threshold:-70,destination_threshold:70,throttle_delay:50,fixed_top:70,offset_by_height:!1}}),RecommendationsSlider.init()},this.handleResize=function(){$(".cuScroll").mCustomScrollbar("update")},this.destroy=function(){},this.handleScroll=function(){},this.scrollToTop=function(){var e=$(".scrollToTop");$(window).scroll(function(){$(this).scrollTop()>300?$(".scrollToTop").fadeIn():$(".scrollToTop").fadeOut()}),e.click(function(e){return e.preventDefault(),$("html, body").animate({scrollTop:0},800),!1})},this.scrollToId=function(){$(".jsScrollTo").click(function(e){e.preventDefault();var t=$(this).attr("href");return $("html, body").animate({scrollTop:$(t).offset().top-a},400),!1})},this.initMmenu=function(){if($("#mobile-nav").length){l.mmenu({navbar:{add:!1,title:"Меню"},extensions:["effect-panels-slide-100","front"]},{clone:!1,offCanvas:{position:"left"}});var e=l.data("mmenu");n.on("click",e.open),o.on("click","#show-mobile-menu",e.close),e.bind("open",function(){n.addClass("is-active")}),e.bind("close",function(){n.removeClass("is-active")})}},this.searchField=function(){var e=$("#ajax-s-container form .ajax-inp"),t=$("#ajax-s-container .close-ajax-search"),o=$(".search-overlay");e.on("focus",function(){s.addClass("focused"),o.addClass("show"),$(".cuSelect select").trigger("refresh"),disableScroll()}),e.on("blur",function(){}),t.click(function(){e.val(""),s.removeClass("focused"),o.removeClass("show"),enableScroll()}),$(document).click(function(t){$(t.target).closest(".block-ajax-search").length||(s.removeClass("focused"),o.removeClass("show"),$("header").removeClass("hide-top-line"),e.val(""),t.stopPropagation(),enableScroll())})},this.customScroll=function(){$(window).load(function(){$(".cuScroll").mCustomScrollbar({axis:"y",scrollInertia:0,mouseWheel:{preventDefault:!0}})})},this.selectCustomeScroll=function(){$(function(){var e;$(".cuSelect select").styler({selectSmartPositioning:!0,selectPlaceholder:"",onFormStyled:function(){e=$(".jq-selectbox__dropdown"),e.find("ul").wrap('<div class="customScrollbar" />')},onSelectOpened:function(){var t=$(this).find(".jq-selectbox__dropdown ul"),o=t.height(),n=e.find(".customScrollbar");n.height(o),t.css("max-height","none"),n.mCustomScrollbar({axis:"y",scrollInertia:0,mouseWheel:{enable:!0,disableOver:null,preventDefault:!0}}),$("html").hasClass("touch")&&($(this).find("select").css({margin:"0px",padding:"0px",position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%",opacity:"0","z-index":"10",background:"red"}),$(this).find("select").trigger("click"))}})})},this.movieRating=function(){$(".movie-item-rating").each(function(){var e=$(this);e.starbox({average:e.attr("data-start-value"),changeable:!e.hasClass("unchangeable")&&(!e.hasClass("clickonce")||"once"),ghosting:!0,autoUpdateAverage:!0,buttons:10,stars:10})})},this.collectionRating=function(){$(".collection-item-rating").each(function(){var e=$(this);e.starbox({average:e.attr("data-start-value"),changeable:!e.hasClass("unchangeable")&&(!e.hasClass("clickonce")||"once"),ghosting:!0,autoUpdateAverage:!0,buttons:10,stars:10})})},this.openLightGallery=function(e){$(e).click(function(e){e.preventDefault();var t=$(this).attr("href"),o=$(t).find("a")[0];$(o).trigger("click")})},this._sliderFrontSlider=$(".front-slider"),this._movieGallerySlider=$(".movie-gallery-slider"),this._moviePostersSlider=$(".movie-posters-slider")}return _createClass(e,[{key:"handleClickOnLinkText",value:function(e){function t(){n.removeClass(l),c&&n.text(i),d.removeClass(s)}function o(){n.addClass(l),c&&n.text(r),d.addClass(s)}var n=$(e.target),l="active",s="show-all",a=n.hasClass(l),i=n.data("shown-text"),r=n.data("hide-text"),c=i&&r,d=n.parents(".literal");e.preventDefault(),toggleLinkText(a,t,o)}}]),e}(),c=new r,d=deviceType(),u=!1,h=!0,p=!1;throttle("resize","optimizedResize"),staticInit(d,c.switchToDesktop,c.switchToTablet,c.switchToMobile),t.on("optimizedResize",function(){var t=deviceType();checkDeviceType(t,u,h,p,[c.switchToDesktop,c.switchToTablet,c.switchToMobile]),e(t)}),t.on("DOMContentLoaded",c.init()).on("scroll",function(){return c.handleScroll()}).on("load",function(){return c.handleLoad()}).on("resize",function(){return c.handleResize()})}();